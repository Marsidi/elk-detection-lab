---
redirect_from:
  - "/export-mordor"
title: |-
  Create Mordor Datasets
pagenum: 5
prev_page:
  url: /mordor_erebor.html
next_page:
  url: /import_mordor.html
suffix: .md
search: kafkacat kafka broker com github json repo data edenhill install mordor simulated test consumer following create datasets style file mode topic also e start logs being apache system helk src iframe picture instructions latest deb package ubuntu quick build consume b t c o end own files available exporting writinng while executing reads messages prints standard output stdout redirect means save collected right before stop consumption done performing just grab re play ingested real requirements org distributed publish subscribe messaging designed fast scalable fault tolerant durable installed generic non jvm producer think netcat img images kafkacatexport png export width height

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">Create Mordor Datasets</div>
</div>
    <div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can create your own mordor datasets like the json files available in this repo.
The mordor style to do this is by exporting data from a kafka broker and writinng it to a JSON file while executing the simulated test.</p>
<h2 id="Kafkacat-Style">Kafkacat Style<a class="anchor-link" href="#Kafkacat-Style"> </a></h2><p>In consumer mode, Kafkacat reads messages from a topic and prints them to standard output (stdout). You can also redirect it to a file (i.e. JSON)
This means that you can save all the data collected right before you start a simulated test from a Kafka broker.
You can stop the consumption when you are done performing the simulated test.
You can just grab the logs from this repo and re-play them as if they were being ingested in real-time.</p>
<h3 id="Requirements">Requirements<a class="anchor-link" href="#Requirements"> </a></h3><ul>
<li><a href="http://kafka.apache.org/">Kafka Broker</a> : A distributed publish-subscribe messaging system that is designed to be fast, scalable, fault-tolerant, and durable  (<strong>Installed by HELK</strong>).</li>
<li><a href="https://github.com/edenhill/kafkacat">Kafkacat</a> : A generic non-JVM producer and consumer for Apache Kafka &gt;=0.8, think of it as a netcat for Kafka.</li>
</ul>
<p><img src="images/kafkacat_export.png"></p>
<h3 id="Export-Logs">Export Logs<a class="anchor-link" href="#Export-Logs"> </a></h3><iframe width="560" height="315" src="https://www.youtube.com/embed/kBe6-D1_ais" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>Install Kafkacat following the <a href="https://github.com/edenhill/kafkacat#install">instructions from the official Kafkacat repo</a></p>
<ul>
<li>If you are using a debian-based system, make sure you install the latest Kafkacat deb package.</li>
<li>I recommend at least Ubuntu 18.04. You can check its <a href="https://packages.ubuntu.com/bionic/kafkacat">Kafkacat deb package version</a> and compare it with the latest one in the <a href="https://github.com/edenhill/kafkacat/releases">Kafkacat GitHub repo</a>.</li>
<li>You can also install it from source following the <a href="https://github.com/edenhill/kafkacat#quick-build">Quick Build</a> instructions.</li>
</ul>
<p>Consume data being produced from a kafka broker with the following flags:</p>
<ul>
<li><strong>-b</strong>: Kafka Broker</li>
<li><strong>-t</strong>: Topic in the Kafka Broker to consume the data from</li>
<li><strong>-C</strong>: Consumer mode</li>
<li><strong>-o</strong>: Offset to start consuming from (i.e. end)</li>
</ul>
<div class="highlight"><pre><span></span>$ kafkacat -b &lt;HELK IP&gt;:9092 -t winlogbeat -C -o end &gt; empire_dcsync_<span class="k">$(</span>date +%F%H%M%S<span class="k">)</span>.json
</pre></div>
<p>That's it! You now can share that dataset with the community!</p>

</div>
</div>
</div>
</div>

 


    </main>
    